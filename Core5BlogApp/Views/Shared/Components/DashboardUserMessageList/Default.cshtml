@using Core5BlogApp.Areas.Admin.Models
@model IEnumerable<WriterMessageImageUrl>
<div class="card direct-chat direct-chat-primary">
    <div class="card-header">
        <h3 class="card-title">
            <i class="far fa-envelope mr-1"></i>
            Son Gelen Mesajlar
        </h3>

        <div class="card-tools">
            <span data-toggle="tooltip" title="3 Yeni Mesaj" class="badge badge-dark">3 Adet</span>
            <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Küçült">
                <i class="fas fa-minus"></i>
            </button>
            <button type="button" class="btn btn-tool" data-card-widget="remove" title="Kapat">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
    <!-- /.card-header -->
    <div class="card-body">
        <!-- Conversations are loaded here -->
        <div class="direct-chat-messages" style="height: auto !important;">
            @foreach (var item in Model)
            {

                <div class="direct-chat-msg">
                    <div class="direct-chat-infos clearfix">
                        <span class="direct-chat-name float-left">@item.SenderName </span>
                        <span class="direct-chat-timestamp float-right">@(((DateTime)item.Date).ToString("dd-MM-yyyy"))</span>
                    </div>

                    <img class="direct-chat-img" src="~/userimage/@item.ImageUrl" alt="@item.SenderName">

                    <div class="direct-chat-text">
                        @{string metin = System.Text.RegularExpressions.Regex.Replace(item.MessageContent, @"<(.|\n)*?>", string.Empty); }
                        @Html.Raw(metin.Substring(0, metin.Length > 30 ? 30 : metin.Length))...
                    </div>
                </div>
            }

        </div>
        <!--/.direct-chat-messages-->
    </div>
    <!-- /.card-body -->
    <div class="card-footer text-center">
        <a href="/Admin/AdminMessage/ReceiverMessage/">Tüm Mesajlar</a>
    </div>
    <!-- /.card-footer-->
</div>